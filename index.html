<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Tabela Excluir, alterar, consultar e incluir</title>
  <link rel="stylesheet" href="estilos.css">
</head>
<body>

  <h2>Adicionar e Alterar</h2>
  <style>

    /* Estilo básico */
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    
    /* Estilos do Formulário */
    form {
      background-color: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ddd;
      margin-bottom: 20px;
    }
    form div {
      margin-bottom: 10px;
    }
    form label {
      display: inline-block;
      width: 80px;
    }
    form input[type="text"] {
      padding: 8px;
      width: 250px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    
    /* Campo de Pesquisa */
    #input-pesquisa {
      width: 100%;
      max-width: 500px;
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    
    /* Tabela (seu estilo original) */
    table {
      width: 100%; /* Mudei para 100% para ficar mais responsivo */
      max-width: 500px;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #f2f2f2;
    }
    
    /* Botões de Ação na Tabela */
    .btn-acao {
      padding: 5px 8px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 5px;
      color: white;
    }
    .btn-alterar {
      background-color: #007bff;
    }
    .btn-alterar:hover {
      background-color: #0069d9;
    }
    .btn-excluir {
      background-color: #dc3545;
    }
    .btn-excluir:hover {
      background-color: #c82333;
    }
    </style>
    <form id="form-gestao">
      <input type="hidden" id="indice-edicao">     <div>
        <label for="input-funcao">Função:</label>
        <input type="text" id="input-funcao" placeholder="Ex: Goleiro" required>
        </div>
        <div>
          <label for="input-nome">Nome:</label>
          <input type="text" id="input-nome" placeholder="Ex: Cássio" required>
          </div>
          <button type="submit" id="btn-salvar">Salvar</button>
          </form>
          
  <hr>

    <h2>Tabela de Funções e Nome</h2>
  <input type="text" id="input-pesquisa" placeholder="Pesquisar na tabela...">

    <table>
   <thead>
    <tr>
     <th>Função</th>
     <th>Nome</th>
     <th>Ações</th>     </tr>
   </thead>
   <tbody id="tabela-corpo">
       </tbody>
  </table>
  <script>
  // Espera o DOM (a página) carregar completamente
document.addEventListener('DOMContentLoaded', () => {

  // --- 1. REFERÊNCIAS AOS ELEMENTOS ---
  const form = document.getElementById('form-gestao');
  const inputFuncao = document.getElementById('input-funcao');
  const inputNome = document.getElementById('input-nome');
  const inputPesquisa = document.getElementById('input-pesquisa');
  const tabelaCorpo = document.getElementById('tabela-corpo');
  const btnSalvar = document.getElementById('btn-salvar');
  const indiceEdicao = document.getElementById('indice-edicao');

  // NOVO: Criamos uma chave (nome) para nossos dados no localStorage
  const CHAVE_STORAGE = 'dadosTabelaFuncoes';

  // --- 2. DADOS (Nosso "Banco de Dados" agora com localStorage) ---
  
  // NOVO: Função para carregar os dados
  function carregarDados() {
    // Tenta pegar os dados salvos no navegador
    const dadosSalvos = localStorage.getItem(CHAVE_STORAGE);
    
    // Se encontrou dados salvos (if), converte o texto de volta para array
    if (dadosSalvos) {
      return JSON.parse(dadosSalvos);
    } 
    
    // Se não (else), usa os seus dados originais como padrão
    return [
      { funcao: "Capitão", nome: "Cristiano Ronaldo" },
      { funcao: "Juiz", nome: "Daronco" },
      { funcao: "Árbitro", nome: "Varmeira" },
      { funcao: "Time", nome: "Ibis" }
    ];
  }

  // NOVO: Função para salvar os dados
  function salvarDados() {
    // Converte o array 'dados' em texto e salva no localStorage
    localStorage.setItem(CHAVE_STORAGE, JSON.stringify(dados));
  }

  // NOVO: Inicializa os dados usando a função de carregar
  let dados = carregarDados();


  // --- 3. FUNÇÕES PRINCIPAIS ---

  /**
  * Função para renderizar (desenhar) a tabela na tela.
  * (Nenhuma mudança necessária aqui)
  */
  function renderizarTabela() {
    tabelaCorpo.innerHTML = '';
    
    const termoPesquisa = inputPesquisa.value.toLowerCase();

    const dadosFiltrados = dados.filter(item => {
      return item.funcao.toLowerCase().includes(termoPesquisa) ||
             item.nome.toLowerCase().includes(termoPesquisa);
    });

    dadosFiltrados.forEach((item, index) => {
      const indiceOriginal = dados.indexOf(item);

      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${item.funcao}</td>
        <td>${item.nome}</td>
        <td>
          <button class="btn-acao btn-alterar" data-index="${indiceOriginal}">Alterar</button>
          <button class="btn-acao btn-excluir" data-index="${indiceOriginal}">Excluir</button>
        </td>
      `;
      tabelaCorpo.appendChild(tr);
    });
  }

  /**
  * Função para lidar com o envio do formulário (Incluir e Alterar)
  */
  function handleFormSubmit(event) {
    event.preventDefault(); 

    const funcao = inputFuncao.value;
    const nome = inputNome.value;
    const index = indiceEdicao.value; 

    if (index === '') {
      // --- INCLUIR (CREATE) ---
      dados.push({ funcao, nome });
    } else {
      // --- ALTERAR (UPDATE) ---
      dados[index] = { funcao, nome };
      
      indiceEdicao.value = '';
      btnSalvar.textContent = 'Salvar';
    }

    form.reset();
    renderizarTabela();
    
    // NOVO: Salva os dados no localStorage após qualquer alteração
    salvarDados(); 
  }

  /**
  * Função para lidar com cliques nos botões de Ação (Alterar e Excluir)
  */
  function handleAcoesClick(event) {
    const target = event.target;
    const index = target.getAttribute('data-index');

    if (target.classList.contains('btn-excluir')) {
      // --- EXCLUIR (DELETE) ---
      dados.splice(index, 1);
      renderizarTabela();
      
      // NOVO: Salva os dados no localStorage após excluir
      salvarDados();

    } else if (target.classList.contains('btn-alterar')) {
      // --- PREPARAR PARA ALTERAR (UPDATE) ---
      const item = dados[index];
      
      inputFuncao.value = item.funcao;
      inputNome.value = item.nome;
      indiceEdicao.value = index; 
      
      btnSalvar.textContent = 'Salvar Alteração';
      window.scrollTo(0, 0);
    }
  }

  // --- 4. EVENT LISTENERS (Monitores de Eventos) ---
  form.addEventListener('submit', handleFormSubmit);
  tabelaCorpo.addEventListener('click', handleAcoesClick);
  inputPesquisa.addEventListener('input', renderizarTabela);


  // --- 5. INICIALIZAÇÃO ---
  // A tabela agora é desenhada com os dados carregados do localStorage
  renderizarTabela();

});
  </script>

    <script src="app.js"></script>
</body>
</html>